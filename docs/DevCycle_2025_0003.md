# Development Cycle 2025-0003

**Status:** In Progress  
**Start Date:** 2025-08-06  
**Target Completion:** TBD  
**Focus:** Core UI layer implementation with essential screens and navigation for Singventory user scenarios

## Overview
This development cycle focuses on implementing the foundational UI layer that enables users to interact with the robust database architecture completed in DevCycle 2. The goal is to create the essential screens and workflows that support the three key user scenarios identified in `docs/Initial_Singventory_Design.md`: impromptu visits, recon visits, and repeat visits. Following PlayStreak's proven MVVM + ViewBinding patterns, this cycle will establish the core navigation and CRUD functionality needed for a functional karaoke tracking app.

## Current Work Items

### Phase 1 - Main Activity and Navigation Setup
**Status:** üîç In Verification  
**Priority:** Critical  
**Description:** Implement MainActivity with bottom navigation and fragment management following PlayStreak's navigation architecture

#### Phase Progress
**Phase Navigation:**
- ‚úÖ COMPLETED: Create MainActivity with bottom navigation (4 tabs: Songs, Venues, Visits, Settings)
- ‚úÖ COMPLETED: Implement Navigation Component setup following PlayStreak patterns
- ‚úÖ COMPLETED: Create base fragments for each main tab
- ‚úÖ COMPLETED: Add Material Design 3 theming with music-themed adaptations
- ‚úÖ COMPLETED: Implement fragment lifecycle management and state preservation

#### Technical Implementation Details
**Complete Navigation Layer Implemented:**
- **MainActivity**: Full Navigation Component integration with AppBarConfiguration for 4 top-level destinations
- **Bottom Navigation**: Material Design 3 BottomNavigationView with custom music-themed icons and colors
- **Fragment Management**: ViewBinding-based fragments with proper lifecycle and state preservation
- **Navigation Graph**: Complete nav_graph.xml with all 4 main destinations configured
- **State Preservation**: MainActivity saves/restores selected tab, all fragments preserve scroll positions and search queries
- **Material Design 3**: Complete theme system with musical purple/gold color palette for light and dark modes
- **Fragment Structure**: SongsFragment, VenuesFragment, VisitsFragment, SettingsFragment all with empty state handling

**Key Features Implemented:**
- Proper fragment lifecycle management with onSaveInstanceState/restoreState patterns
- SearchBar components ready for Phase 2 implementation
- FAB buttons positioned and configured for CRUD operations
- Settings screen with data count display following PlayStreak pattern
- Music-themed color system with primary purple (#6B3BA0) and secondary gold (#D4AF37)
- Complete ViewBinding setup with proper null safety patterns

#### Issues Identified During User Testing
**Status:** üîç Requires Resolution  

**Issue 1: Status Bar Icons Visibility in Light Mode**
- **Problem**: Time, Wi-Fi signal strength, and battery icons are not visible in light mode
- **Observation**: Icons are visible in dark mode, indicating theme color application issue
- **Root Cause**: App not properly handling system bar colors for light/dark theme switching
- **Impact**: Poor user experience in light mode - critical system information hidden
- **‚úÖ FIXED**: Added proper system UI color configuration to both light and dark themes
  - Light theme: `android:windowLightStatusBar="true"` with white status bar background
  - Dark theme: `android:windowLightStatusBar="false"` with dark status bar background
  - Navigation bar colors also configured for consistency

**Issue 2: Content Layout Overlapping Status Bar (SDK 35/36 Edge-to-Edge)**
- **Problem**: Fragment content is drawing behind/above the action bar and status bar area
- **Symptoms**: 
  - Songs page: "No songs yet..." content starts above "Your Songs" title bar
  - Settings page: Data overview card has top border intersecting with time/signal icons
- **Root Cause**: Edge-to-edge layout enforcement in SDK 35/36 without proper window insets handling
- **Comparison**: Similar issues encountered in PlayStreak project with modern Android versions
- **Impact**: Content obscured by system UI, poor visual hierarchy

**Technical Analysis:**
- Modern Android (API 35/36) enforces edge-to-edge display by default
- App requires proper WindowInsets handling and system bar color management
- Material Design 3 theme may need adjustment for system UI integration
- Status bar content color needs dynamic adjustment based on theme

#### Resolution Required
These UI issues must be addressed before Phase 1 can be marked as completed. The app currently has fundamental display problems that affect core usability.

#### Next Steps
- Fix system bar color handling for light/dark themes
- Implement proper edge-to-edge layout with WindowInsets
- Test on multiple Android versions to ensure compatibility
- Phase 1 remains in verification pending these critical UI fixes

### Phase 2 - Songs and Venues CRUD Screens
**Status:** üìã Open  
**Priority:** High  
**Description:** Implement core CRUD functionality for songs and venues with search/filter capabilities

#### Phase Progress
**Phase CRUD Implementation:**
- ‚ùå TODO: Create SongsFragment with RecyclerView following PlayStreak's list patterns
- ‚ùå TODO: Implement AddSongFragment with form validation and key input support
- ‚ùå TODO: Create VenuesFragment with venue list and search functionality
- ‚ùå TODO: Implement AddVenueFragment with venue information input
- ‚ùå TODO: Add floating action buttons for quick addition workflow
- ‚ùå TODO: Implement search functionality prioritizing frequently performed songs
- ‚ùå TODO: Create song-venue association screens for adding venues to existing songs

#### Technical Implementation Details
*To be documented as CRUD screens are implemented*

#### Next Steps
- Build core content management screens
- Implement search and filtering as specified in design document
- Support dual key input methods for musical key management

### Phase 3 - Visit Management and Performance Logging
**Status:** üìã Open  
**Priority:** High  
**Description:** Implement visit creation, performance logging, and key adjustment workflows for live karaoke scenarios

#### Phase Progress
**Phase Visit Workflows:**
- ‚ùå TODO: Create VisitsFragment showing recent and active visits
- ‚ùå TODO: Implement StartVisitFragment with venue selection and auto-complete
- ‚ùå TODO: Create ActiveVisitFragment for live performance logging during karaoke sessions
- ‚ùå TODO: Implement quick performance entry with minimal tap requirements
- ‚ùå TODO: Add key adjustment interface supporting both dropdown and step-based input
- ‚ùå TODO: Create visit completion workflow with explicit end/reopen capability
- ‚ùå TODO: Implement performance notes entry (optional immediate, can add later)

#### Technical Implementation Details
*To be documented as visit management features are implemented*

#### Next Steps
- Focus on speed of performance logging for live use
- Support all three user scenarios from design document
- Integrate musical key management system from DevCycle 2

## Cycle Notes
- Building on complete database architecture from DevCycle 2
- Following PlayStreak's proven UI patterns and fragment management
- Implementing offline-first design for poor connectivity at karaoke venues
- Supporting all user scenarios from Initial_Singventory_Design.md
- Material Design 3 with music-themed adaptations as specified in design

## Future Cycles
- Settings screen with data counters (following PlayStreak patterns)
- Import/Export functionality (direct copy from PlayStreak)
- Purge data functionality with stats preservation
- Advanced features like analytics and search enhancements

## Cycle Completion Summary
*[To be added when cycle is completed]*

## Design Document Reference
This implementation directly supports the user scenarios outlined in `docs/Initial_Singventory_Design.md`:

**Impromptu Visit Scenario (Lines 82-94):**
- Quick venue creation with minimal required information
- Song-venue association through "add venue" icon workflow
- Performance logging with optional notes ("too high", "too low", "just right")
- Rapid workflow for friends and social karaoke situations

**Recon Visit Scenario (Lines 95-110):**
- Pre-visit venue setup with full information entry
- Song candidate addition before visiting venue
- Venue song ID entry for preparation
- Post-visit key information and preference updates

**Repeat Visit Scenario (Lines 111-122):**
- Quick venue selection for known locations
- Display of researched songs with key information and frequency indicators
- Performance entry showing venue song IDs and key adjustments
- Visit completion with notes about cost, duration, companions

**Key Requirements from Design Document:**
- Bottom navigation: Songs, Venues, Visits, Settings (PlayStreak pattern)
- Quick performance logging optimized for live karaoke use
- Dual key input methods: dropdown selection AND step adjustments
- Search prioritizing frequently performed songs
- Offline-first operation for venues with poor connectivity
- Visit auto-save after each performance entry
- Explicit visit end/reopen capability