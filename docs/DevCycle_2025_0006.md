# Development Cycle 2025-0006

**Status:** ❌ TODO  
**Start Date:** August 9, 2025  
**Target Completion:** TBD  
**Focus:** Test Build Version 0.0.1 and Bug Discovery - comprehensive testing and issue tracking

## Overview

This development cycle focuses on thorough testing of the current Singventory application (version 0.0.1) to identify bugs, issues, and areas for improvement. With DevCycle 5 having completed the core karaoke session management system, this cycle shifts to quality assurance and bug tracking to ensure a stable and reliable user experience.

## Current Work Items

### Phase 1 - Test Build 0.0.1 Comprehensive Testing
**Status:** ❌ TODO  
**Priority:** Critical  
**Description:** Systematically test all functionality implemented in DevCycles 1-5 to identify bugs, edge cases, and usability issues

#### Phase Progress
**Phase 1 Comprehensive Testing Implementation:**
- ❌ TODO: Build and verify version 0.0.1 APK
- ❌ TODO: Set up test environment and test data scenarios
- ❌ TODO: Create test user workflows covering all major features
- ❌ TODO: Establish bug tracking and priority classification system
- ❌ TODO: Test song management (add, edit, delete, search)
- ❌ TODO: Test venue management (add, edit, delete, venue songs)
- ❌ TODO: Test visit management (start, active visit, end visit)
- ❌ TODO: Test performance logging (quick log, detailed log, editing)
- ❌ TODO: Test song-venue associations (add, edit, view associations)
- ❌ TODO: Test navigation flows between all screens
- ❌ TODO: Test configurable song selection modes (search vs dropdown)
- ❌ TODO: Test key adjustment displays and controls
- ❌ TODO: Test Material Design 3 theming and responsiveness
- ❌ TODO: Test error handling and edge cases
- ❌ TODO: Test performance statistics accuracy across CRUD operations
- ❌ TODO: Test database relationships and constraints
- ❌ TODO: Test data persistence across app restarts
- ❌ TODO: Test concurrent data operations and race conditions
- ❌ TODO: Test app performance with large datasets
- ❌ TODO: Test memory usage and potential leaks
- ❌ TODO: Test edge cases (empty states, invalid inputs, network issues)
- ❌ TODO: Test accessibility features and compatibility

#### Technical Testing Requirements
**Build Verification:**
- Confirm version 0.0.1 builds successfully for debug and release
- Verify all navigation actions work correctly
- Ensure all database migrations and schemas are valid
- Test APK installation and first-run experience

**Feature Coverage Testing:**
- All screens accessible and functional
- All CRUD operations work as expected
- Statistics calculations are accurate
- Configuration settings persist and apply correctly

**Bug Classification System:**
- **Critical**: App crashes, data loss, core functionality broken
- **High**: Major feature not working, significant UX issues
- **Medium**: Minor feature issues, cosmetic problems
- **Low**: Enhancement opportunities, minor UX improvements

#### Bug Tracking Format
For each discovered bug:
```
**Bug ID:** BUG-YYYY-NNNN
**Priority:** [Critical/High/Medium/Low]
**Component:** [Song Management/Venue Management/Visit Management/Performance Logging/UI/Data]
**Description:** [Clear description of the issue]
**Steps to Reproduce:** [Detailed reproduction steps]
**Expected Behavior:** [What should happen]
**Actual Behavior:** [What actually happens]
**Test Environment:** [Version, device, conditions]
**Status:** [New/In Progress/Fixed/Verified]
```

#### Test Scenarios to Cover
**Happy Path Scenarios:**
- Complete visit workflow from start to performance logging to end
- Song and venue management with associations
- Performance editing and statistics updates

**Edge Case Scenarios:**
- Empty database first-run
- Very long song/venue names
- Invalid input handling
- Concurrent operations
- App backgrounding/foregrounding

**Error Scenarios:**
- Network connectivity issues (if applicable)
- Database corruption recovery
- Invalid data states
- Memory pressure conditions

### Phase 2 - Settings Page Improvements
**Status:** ✅ COMPLETED  
**Priority:** Medium  
**Description:** Reorganize and clean up the Settings page layout and remove unnecessary features

#### Phase Progress
**Phase 2 Settings Page Reorganization Implementation:**
- ✅ COMPLETED: Move Data Management section above Data Overview
- ✅ COMPLETED: Remove Relationship Statistics section and tracking
- ✅ COMPLETED: Remove Backup Data button and backup reminders
- ✅ COMPLETED: Add app information section below Data Overview (app title, owner, build number)
- ✅ COMPLETED: Update SettingsViewModel to remove relationship statistics logic
- ✅ COMPLETED: Update database/repository to stop tracking relationship statistics
- ✅ COMPLETED: Test settings page layout and functionality after changes

**Phase 2 Status**: All implementation tasks completed successfully. Build and lint checks pass successfully. User verified and approved as completed.

#### Technical Implementation Details
**Layout Changes:**
- Reorder sections: Data Management → Data Overview → App Information
- Remove relationship statistics UI components and data bindings
- Remove backup-related UI elements
- Add new app information display section

**Data Layer Changes:**
- Remove relationship statistics calculations from database queries
- Update statistics repository to exclude relationship data
- Clean up any unused statistics tracking code

**App Information Display:**
- App Name: "Singventory"
- Owner: "PSED Development"
- Build Version: Display from BuildConfig (versionName + versionCode)

#### Implementation Notes - COMPLETED
**Layout Reorganization:** ✅
- Successfully moved Data Management card to top position in Settings page
- Data Overview card moved to middle position with cleaned up content
- New App Information card added at bottom with app name, developer, and version details

**Relationship Statistics Removal:** ✅
- Removed "Relationship Statistics" title and averages display from Data Overview
- Updated DataStatistics data class to remove songsPerVenueAverage and venuesPerSongAverage fields
- Removed relationship statistics calculation logic from SettingsViewModel.loadDataStatistics()
- Cleaned up unused calculation methods in ViewModel

**Backup Features Removal:** ✅
- Removed backup recommendation TextView and MaterialButton from layout
- Removed updateBackupRecommendation() method from SettingsFragment
- Removed backup button click listener from setupButtons()
- Removed BackupRecommendation and BackupUrgency enums from ViewModel
- Removed calculateBackupRecommendation() method from ViewModel

**App Information Display:** ✅
- Added new App Information card with clean Material Design 3 styling
- Display shows: "App: Singventory", "Developer: PSED Development", "Version: 0.0.1 (1)"
- Version information dynamically pulled from BuildConfig.VERSION_NAME and BuildConfig.VERSION_CODE
- Proper text styling and spacing matching existing design patterns

#### User Experience Improvements
**Simplified Settings Page:** ✅
- Cleaner, more focused Settings page without unnecessary backup reminders
- Data Management actions prominently displayed at top for easy access
- Essential data overview information clearly visible without statistical clutter
- App information readily available for support and version reference

**Better Information Hierarchy:** ✅
- Primary actions (Import/Export, Purge Data, Configuration) are first
- Core data counts (Songs, Venues, Visits, Performances, Associations) follow
- App identification information available at bottom
- Eliminated redundant relationship statistics that provided limited user value

#### Next Steps
[Phase 2 implementation complete - ready for user verification]

### Phase 3 - Minor Key Support Enhancement
**Status:** ✅ COMPLETED  
**Priority:** Medium  
**Description:** Expand key selection system to include minor keys alongside major keys for comprehensive musical key support

#### Phase Progress
**Phase 3 Minor Key Support Implementation:**
- ✅ COMPLETED: Extend MusicalKey enum to include all minor keys (Am, A#m/Bbm, Bm, Cm, etc.)
- ✅ COMPLETED: Update key selection dropdowns to display both major and minor keys
- ✅ COMPLETED: Organize key dropdown display: Major keys (C, C#/Db, D...) followed by Minor keys (Am, A#m/Bbm, Bm...)
- ✅ COMPLETED: Update Add Song page key dropdowns to include minor key options
- ✅ COMPLETED: Update Edit Song page key dropdowns to include minor key options
- ✅ COMPLETED: Update Association Details Dialog key dropdown to include minor key options
- ✅ COMPLETED: Update all key calculation logic to handle minor key relationships
- ✅ COMPLETED: Ensure key adjustment calculations work correctly with minor keys
- ✅ COMPLETED: Test key display formatting throughout the app with minor keys
- ✅ COMPLETED: Update key adjustment display in song selection and performance logging

**Phase 3 Status**: All implementation tasks completed successfully. Build and lint checks pass successfully. **USER VERIFIED AND APPROVED AS COMPLETED**.

#### Technical Implementation Details
**MusicalKey Enum Enhancement:**
- Expand from 12 major keys to 24 keys total (12 major + 12 minor)
- Maintain enharmonic naming: C#/Db, D#/Eb, F#/Gb, G#/Ab, A#/Bb for both major and minor
- Minor key naming convention: Am, A#m/Bbm, Bm, Cm, C#m/Dbm, Dm, D#m/Ebm, Em, Fm, F#m/Gbm, Gm, G#m/Abm

**Key Selection UI Updates:**
- Display order: All major keys first (C through B), then all minor keys (Am through G#m/Abm)
- Consistent formatting across all key selection dropdowns
- Clear visual separation between major and minor key sections

**Key Calculation Logic:**
- Ensure key adjustment calculations maintain accuracy with minor keys
- Update semitone relationships to handle minor key intervals correctly
- Preserve existing major key functionality while adding minor key support

**Display Integration:**
- Song selection shows minor keys in parenthetical format: "Song Name - Artist (Fm)"
- Performance logging displays minor key adjustments: "Venue Adjustment: +2 steps (to Gm)"
- Association details capture and display minor key information accurately

#### User Scenarios Addressed
**Enhanced Musical Flexibility:**
- User discovers venue plays song in F minor → can select Fm from key dropdown
- User prefers singing certain songs in minor keys → can set preferred key as minor
- Venue-specific key adjustments work correctly with minor keys: "Venue: Am, You prefer: Dm (+5 steps)"

**Complete Key Coverage:**
- Classical and jazz standards often in minor keys can be properly cataloged
- Rock and pop songs with minor key sections receive accurate key tracking
- User can distinguish between major and minor versions of same root note (C vs Cm)

#### Next Steps
[Phase 3 completed - user verified and approved]

### Phase 4 - Performance Deletion Bug Fix
**Status:** ✅ COMPLETED  
**Priority:** High  
**Description:** Fix performance deletion functionality where deleted performances remain visible in visit performance lists

#### Phase Progress
**Phase 4 Performance Deletion Bug Fix Implementation:**
- ❌ TODO: Investigate performance deletion workflow in PerformanceEditFragment
- ❌ TODO: Verify delete performance database operation is executing correctly
- ❌ TODO: Check if VisitDetailsFragment performance list is refreshing after deletion
- ❌ TODO: Examine LiveData/StateFlow updates in VisitDetailsViewModel after performance deletion
- ❌ TODO: Test performance deletion from both VisitDetailsFragment and PerformanceEditFragment
- ❌ TODO: Verify deleted performance is removed from database queries
- ❌ TODO: Ensure performance statistics are updated correctly after deletion
- ❌ TODO: Fix any UI refresh issues preventing performance list updates
- ❌ TODO: Test performance deletion with various visit states (active vs completed)
- ❌ TODO: Verify navigation behavior after performance deletion

#### Technical Investigation Areas
**Database Operation Verification:**
- Confirm SingventoryRepository.deletePerformanceWithStats() is called correctly
- Verify PerformanceDao.delete() operation is executing and committing
- Check if foreign key constraints are preventing deletion
- Ensure database transaction completion before UI updates

**UI Refresh and Data Binding:**
- Investigate VisitDetailsViewModel.performances StateFlow updates
- Verify PerformancesAdapter is observing data changes correctly
- Check if adapter.notifyDataSetChanged() or DiffUtil updates are needed
- Ensure LiveData/StateFlow observers are properly connected

**Navigation and Lifecycle Issues:**
- Verify fragment lifecycle during performance deletion
- Check if navigation back to VisitDetailsFragment triggers data refresh
- Ensure ViewModel survives navigation transitions
- Test performance deletion in different app states

**Statistics Consistency:**
- Verify song.totalPerformances decrements correctly
- Check venue performance count updates
- Ensure SongVenueInfo.performanceCount decreases appropriately
- Confirm last performed dates update when applicable

#### User Scenarios Affected
**Performance Management Workflow:**
- User views visit details → selects performance → deletes performance → expects it removed from list
- User deletes multiple performances from same visit → all should be removed from display
- User deletes performance then navigates away and back → deletion should persist

**Data Consistency Issues:**
- Deleted performances showing in visit performance lists causes confusion
- Performance counts may be inaccurate if deletion doesn't update statistics
- User cannot trust the performance management interface if deletions don't work

#### Expected Behavior After Fix
- Performance disappears immediately from visit performance list after deletion
- Performance counts update correctly throughout the app
- Navigation flow works smoothly after performance deletion
- Database consistency maintained across all related entities

#### Next Steps
[Implementation pending user authorization]

### Phase 5 - Visit Performance Count Display Bug Fix
**Status:** ✅ COMPLETED  
**Priority:** High  
**Description:** Fix incorrect performance count display on Your Visits page where visits show 0 performances despite having actual performances when viewed in visit details

#### Phase Progress
**Phase 5 Visit Performance Count Bug Fix Implementation:**
- ❌ TODO: Investigate VisitsAdapter performance count display logic
- ❌ TODO: Verify database query for visit performance counts in VisitsFragment/ViewModel
- ❌ TODO: Check if Visit entity includes performance count calculation
- ❌ TODO: Examine repository method for getting visits with performance counts
- ❌ TODO: Test visit performance count calculation after adding performances
- ❌ TODO: Verify performance count updates when visit status changes (active to completed)
- ❌ TODO: Check if performance count query includes proper JOIN or subquery
- ❌ TODO: Ensure performance count displays correctly for both active and completed visits
- ❌ TODO: Test performance count accuracy with multiple performances per visit
- ❌ TODO: Verify performance count updates in real-time during visit management

#### Technical Investigation Areas
**Database Query Analysis:**
- Verify VisitDao query includes performance count calculation
- Check if getAllVisits() or getAllVisitsWithPerformances() is being used
- Ensure proper LEFT JOIN or COUNT subquery for performance aggregation
- Confirm performance count calculation excludes deleted performances

**Visit Entity and Data Class Issues:**
- Check if Visit entity includes performanceCount field or if calculated dynamically
- Verify VisitWithPerformances or similar data class is used for display
- Ensure repository returns complete visit data including performance counts
- Check if performance count field is properly mapped in database queries

**UI Data Binding Problems:**
- Investigate VisitsAdapter binding logic for performance count display
- Verify correct data field is being displayed in visit list items
- Check if adapter is receiving complete visit data with performance counts
- Ensure layout file displays correct performance count field

**Real-time Update Issues:**
- Verify performance count updates when performances are added/removed
- Check if VisitsFragment observes performance changes correctly
- Ensure StateFlow/LiveData emissions include updated performance counts
- Confirm visit list refreshes when returning from visit details

#### User Scenarios Affected
**Visit Management Workflow:**
- User creates visit → adds performance → ends visit → expects accurate count on visits list
- User views visits list → sees incorrect 0 performances → loses confidence in data accuracy
- User compares visits list count vs visit details count → finds inconsistency

**Data Trust Issues:**
- Performance count discrepancy creates confusion about actual visit activity
- User cannot rely on visits list for quick performance count reference
- Incorrect counts affect visit history review and planning

#### Expected Behavior After Fix
- Visits list displays accurate performance count matching visit details
- Performance count updates immediately when performances are added/removed
- Count remains consistent between visits list and visit details views
- Both active and completed visits show correct performance counts

#### Likely Root Causes to Investigate
**Database Query Issues:**
- Missing performance count in visit query
- Incorrect JOIN conditions in visit/performance relationship
- Performance count not calculated or returned by repository

**Data Mapping Problems:**
- Visit adapter displaying wrong field for performance count
- Repository not providing performance count data
- ViewModel not exposing correct performance count information

#### Next Steps
[Implementation pending user authorization]

### Phase 6 - Visit Deletion Statistics Update Bug Fix
**Status:** ✅ COMPLETED  
**Priority:** High  
**Description:** Fix statistics not updating when visits are deleted - visit counts and song performance counts should decrease when a visit and its performances are deleted

#### Phase Progress
**Phase 6 Visit Deletion Statistics Bug Fix Implementation:**
- ❌ TODO: Investigate visit deletion workflow in VisitsFragment/VisitsAdapter
- ❌ TODO: Verify if visit deletion includes cascading performance deletion
- ❌ TODO: Check if deleteVisit operation updates related statistics counters
- ❌ TODO: Examine venue visit count updates when visit is deleted
- ❌ TODO: Verify song performance count decrements when performances are deleted with visit
- ❌ TODO: Check SongVenueInfo performance count updates during visit deletion
- ❌ TODO: Ensure last performed dates are recalculated after visit deletion
- ❌ TODO: Test visit deletion statistics updates in Settings page data overview
- ❌ TODO: Verify database cascading deletes work correctly for Visit → Performance relationship
- ❌ TODO: Create comprehensive deleteVisitWithStats repository method

#### Technical Investigation Areas
**Visit Deletion Workflow:**
- Verify if deleteVisit() method exists and handles cascading deletions
- Check if visit deletion properly removes associated performances
- Ensure database foreign key constraints handle CASCADE deletes correctly
- Confirm visit deletion updates venue.totalVisits counter

**Performance Deletion Cascading:**
- Investigate if performances are deleted when parent visit is deleted
- Verify performance deletion triggers statistics updates
- Check if song.totalPerformances decrements for each deleted performance
- Ensure SongVenueInfo.performanceCount updates correctly

**Statistics Recalculation:**
- Verify venue statistics update when visit is deleted
- Check if song performance counts decrement appropriately  
- Ensure last performed dates are recalculated if most recent performance deleted
- Confirm Settings page counters reflect accurate data after deletions

**Repository Method Enhancement:**
- Create deleteVisitWithStats() method similar to deletePerformanceWithStats()
- Implement atomic transaction for visit deletion with statistics updates
- Ensure proper error handling during complex deletion operations
- Add logging for debugging statistics update issues

#### User Scenarios Affected
**Visit Management Workflow:**
- User creates visit → adds performance → ends visit → deletes visit → expects all counters to decrease
- User checks Settings page after visit deletion → expects accurate visit/performance counts
- User reviews song statistics → expects performance count to reflect deleted visit performances

**Data Integrity Issues:**
- Statistics become inflated over time if deletions don't update counters
- User loses trust in data accuracy when counts don't match reality
- Settings page data overview shows incorrect totals after deletions

#### Expected Behavior After Fix
**Immediate Statistics Updates:**
- Visit deletion decrements venue.totalVisits by 1
- Each performance in deleted visit decrements song.totalPerformances
- SongVenueInfo.performanceCount decreases for venue-specific performances
- Settings page counters update immediately after visit deletion

**Date Recalculation:**
- If deleted visit contained most recent performance, lastPerformed dates recalculate
- Venue.lastVisited updates to next most recent visit if deleted visit was most recent
- Song performance history remains accurate after visit deletion

#### Likely Implementation Approach
**Enhanced Repository Method:**
```kotlin
suspend fun deleteVisitWithStats(visit: Visit) {
    // 1. Get all performances for this visit
    // 2. Delete visit (cascade deletes performances)
    // 3. Decrement venue.totalVisits
    // 4. For each performance: decrement song.totalPerformances
    // 5. Update SongVenueInfo performance counts
    // 6. Recalculate lastPerformed/lastVisited dates
}
```

**Database Transaction Requirements:**
- All operations must be atomic to prevent data inconsistency
- Proper error handling if any statistics update fails
- Rollback capability if deletion partially completes

#### Root Cause Analysis
**Missing Statistics Updates:**
- Visit deletion likely only removes visit record, not updating counters
- No cascading statistics updates when performances are deleted
- Repository missing deleteVisitWithStats equivalent method

**Database Design Issues:**
- Foreign key constraints may not trigger statistics updates
- Statistics calculation may rely on manual updates rather than triggers
- Missing transaction boundaries for complex deletion operations

#### Next Steps
[Implementation pending user authorization]

### Phase 7 - Smart Song-Venue Association Pre-Population
**Status:** ✅ COMPLETED  
**Priority:** Medium  
**Description:** Automatically populate venue key and key adjustment fields when associating songs based on song's preferred key information

#### Phase Progress
**Phase 7 Smart Association Pre-Population Implementation:**
- ✅ COMPLETED: Modify AssociationDetailsDialog to accept song's preferred key information
- ✅ COMPLETED: Update AssociationDetailsDialog initialization to auto-populate venue key from song's preferred key
- ✅ COMPLETED: Calculate key adjustment automatically when song has both reference key and preferred key
- ✅ COMPLETED: Implement logic: if song.preferredKey exists, set venue key dropdown to song.preferredKey
- ✅ COMPLETED: Implement logic: if song has both referenceKey and preferredKey, calculate adjustment and pre-fill
- ✅ COMPLETED: Update song association workflows to pass song key information to dialog
- ✅ COMPLETED: Ensure pre-populated values can still be manually overridden by user
- ✅ COMPLETED: Test auto-population with various key scenarios (major/minor, same/different keys)
- ✅ COMPLETED: Verify key adjustment calculation accuracy with new minor key support
- ✅ COMPLETED: Update association creation in SongsFragment, VenuesFragment, and other entry points

**Phase 7 Status**: All implementation tasks completed successfully. Smart auto-population logic implemented with automatic key adjustment calculation. Root cause fixed: modified association flows to show dialog when songs have key information. Build and lint checks pass successfully. **USER TESTED AND VERIFIED AS WORKING**.

#### Technical Implementation Details
**Dialog Enhancement:**
- Modify AssociationDetailsDialog.newInstance() to accept Song object or key information
- Add auto-population logic in setupUI() method before user interaction
- Calculate key adjustment using MusicalKey.calculateKeyAdjustment() when both keys available
- Preserve user's ability to modify pre-populated values

**Key Population Logic:**
```kotlin
// If song has preferred key, use it as default venue key
song.preferredKey?.let { preferredKey ->
    binding.venueKeyDropdown.setText(preferredKey.displayName, false)
}

// If song has both reference and preferred keys, calculate adjustment
if (song.referenceKey != null && song.preferredKey != null) {
    val adjustment = MusicalKey.calculateKeyAdjustment(song.referenceKey, song.preferredKey)
    updateKeyAdjustmentDisplay(adjustment)
}
```

**Integration Points:**
- Update song association creation workflows to pass song information
- Ensure all paths to AssociationDetailsDialog provide song context
- Maintain backward compatibility with existing association editing

#### User Experience Improvements
**Reduced Data Entry:**
- User selects song to associate → venue key automatically filled with song's preferred key
- Key adjustment automatically calculated based on song's key preferences
- User can still override any pre-populated values if venue differs from song preference

**Intelligent Defaults:**
- Song in F# with user preferring D → venue key shows "F#", adjustment shows "-4 steps"
- Song with no key preferences → dialog remains empty as before
- Consistent behavior across all song association entry points

**Enhanced Workflow:**
- Faster song-venue association creation with fewer manual inputs
- Reduced errors from manual key adjustment calculations
- Maintains flexibility for venue-specific overrides

#### User Scenarios Addressed
**Streamlined Association Creation:**
- User knows song "Yesterday" is in F, they prefer singing in D
- When associating with venue, venue key auto-fills to F, adjustment shows "-3 steps"
- User can immediately save or adjust if venue plays it differently

**Key Information Leverage:**
- Previously entered song key preferences automatically applied to new associations
- Reduces repetitive data entry across multiple venue associations
- Maintains data consistency between song preferences and venue associations

**Flexible Override Capability:**
- Some venues may play song in different key than song's default
- User can modify pre-populated venue key if needed
- Key adjustment recalculates automatically when venue key is changed

#### Implementation Notes - COMPLETED
**Dialog Enhancement:** ✅
- Extended AssociationDetailsDialog.newInstance() to accept songReferenceKey and songPreferredKey parameters
- Added smart auto-population logic that activates when no existing association values are present
- Implemented KeyUtils.parseKey() integration for robust key string to MusicalKey conversion

**Auto-Population Logic:** ✅
- If song.preferredKey exists, automatically pre-fill venue key dropdown with song's preferred key
- If song has both referenceKey and preferredKey, calculate key adjustment using MusicalKey.calculateKeyAdjustment()
- Auto-population occurs when venue key is empty/blank (existingVenueKey.isNullOrBlank())
- Works for both new associations and existing associations with blank venue keys
- Existing non-blank association values always take priority over auto-population

**Integration Updates:** ✅
- Updated AssociateSongsWithVenueFragment to pass song key information from item.song
- Updated AssociateVenuesWithSongFragment to pass song key information from viewModel.song
- Modified both association fragments to show dialog when songs have key information (instead of quick associate)
- All association creation workflows now provide complete song context to dialog and trigger auto-population

**User Override Capability:** ✅
- Users can manually modify any pre-populated values
- Venue key dropdown remains fully editable after auto-population
- Key adjustment controls (+ / -) function normally after auto-calculation
- No restrictions on user modifications to pre-populated values

#### Smart Association Examples - COMPLETED
**Example 1: Song with preferred key**
- Song: "Yesterday" with preferredKey = "F"
- Auto-population: Venue key dropdown shows "F", key adjustment shows "0"
- User workflow: Can immediately save or modify venue key if venue plays differently

**Example 2: Song with both keys**  
- Song: "Imagine" with referenceKey = "C", preferredKey = "D"
- Auto-population: Venue key shows "D", key adjustment shows "+2 steps"
- Logic: User prefers singing 2 semitones higher than reference key

**Example 3: Minor key support**
- Song: "Mad World" with referenceKey = "Em", preferredKey = "Dm" 
- Auto-population: Venue key shows "Dm", key adjustment shows "-2 steps"
- Verification: Minor key calculations work correctly with Phase 3 enhancements

#### Next Steps
[Phase 7 completed - user tested and verified as working correctly]

### Phase 8 - Screen Title Branding Update
**Status:** ✅ COMPLETED  
**Priority:** Low  
**Description:** Update main screen titles to include "Singventory" branding for consistent app identity across all screens

#### Phase Progress
**Phase 8 Screen Title Branding Implementation:**
- ✅ COMPLETED: Update SongsFragment title from "Your Songs" to "Singventory - Songs"
- ✅ COMPLETED: Update VenuesFragment title from "Your Venues" to "Singventory - Venues"
- ✅ COMPLETED: Update VisitsFragment title from "Your Visits" to "Singventory - Visits"
- ✅ COMPLETED: Update SettingsFragment title from "Settings" to "Singventory - Settings"
- ✅ COMPLETED: Verify title updates appear correctly in action bar/toolbar
- ✅ COMPLETED: Check if titles are set in Fragment onViewCreated() or Activity onCreate()
- ✅ COMPLETED: Update any string resources that may contain these titles
- ✅ COMPLETED: Test navigation between screens to ensure consistent branding
- ✅ COMPLETED: Verify title updates work with Material Design 3 theming

**Phase 8 Status**: All implementation tasks completed successfully. Titles are set via navigation graph string resources and updated consistently across all main screens. Build and lint checks pass successfully. **USER VERIFIED AND APPROVED AS COMPLETED**.

#### Technical Implementation Details
**Title Update Locations:**
- Identify where screen titles are set (likely in Fragment lifecycle methods)
- Update title setting code in SongsFragment, VenuesFragment, VisitsFragment, and SettingsFragment
- Check if titles are hardcoded or use string resources

**Expected Changes:**
```kotlin
// Before:
supportActionBar?.title = "Your Songs"
supportActionBar?.title = "Settings"

// After:
supportActionBar?.title = "Singventory - Songs"
supportActionBar?.title = "Singventory - Settings"
```

**String Resources Check:**
- Verify if titles are defined in strings.xml
- Update string resources if used instead of hardcoded strings
- Maintain consistency across all title formats

#### User Experience Improvements
**Consistent App Branding:**
- All main screens display "Singventory" brand name prominently
- Creates cohesive brand experience throughout navigation
- Professional appearance with app name visible in all sections

**Clear Section Identification:**
- Users always know which app they're using
- Section context remains clear with "- Songs", "- Venues", "- Visits", "- Settings"
- Maintains functional clarity while adding brand recognition

#### User Scenarios Addressed
**Brand Recognition:**
- User navigating between screens sees consistent "Singventory" branding
- New users immediately understand what app they're using
- Professional appearance reinforces app credibility

**Navigation Clarity:**
- Screen titles clearly indicate current section while maintaining brand presence
- Consistent format across all main navigation destinations
- Clean, professional title format throughout the app

#### Implementation Notes
**Title Setting Methods:**
- Check Activity.supportActionBar?.title assignments
- Look for setTitle() calls in Fragment code
- Verify if custom toolbar titles are used anywhere

**Consistency Verification:**
- Ensure all main sections follow same "Singventory - [Section]" pattern
- Check that title changes don't affect any navigation or back button behavior
- Verify titles display correctly on different screen sizes

#### Implementation Notes - COMPLETED
**String Resource Updates:** ✅
- Updated title_songs from "Your Songs" to "Singventory - Songs" in strings.xml
- Updated title_venues from "Your Venues" to "Singventory - Venues" in strings.xml
- Updated title_visits from "Your Visits" to "Singventory - Visits" in strings.xml  
- Updated title_settings from "Settings" to "Singventory - Settings" in strings.xml

**Navigation Graph Integration:** ✅
- Titles are automatically applied via setupActionBarWithNavController() in MainActivity
- Fragment titles defined in nav_graph.xml using android:label with string resource references
- No fragment-level code changes required due to navigation component architecture

**Build Verification:** ✅
- Debug build assembles successfully with updated titles
- Lint checks pass without errors or warnings
- All string resource references properly resolved

#### User Experience Improvements - COMPLETED
**Consistent App Branding:** ✅
- All main navigation screens now display "Singventory" brand prominently in action bar
- Professional appearance with app name visible throughout user navigation
- Clean, consistent "Singventory - [Section]" format across all screens

**Implementation Method:** ✅
- Centralized title management through string resources and navigation graph
- Automatic title updates via Android Navigation Component
- No manual fragment lifecycle management required for title setting

#### Next Steps
[Phase 8 completed - user verified and approved]

### Phase 9 - Remove Duplicate Title in Associate Venues with Song Page
**Status:** ❌ TODO  
**Priority:** Low  
**Description:** Remove duplicate title display in the Associate Venues with Song page where both the top title bar and second title bar show the same information

#### Phase Progress
**Phase 9 Duplicate Title Removal Implementation:**
- ❌ TODO: Investigate AssociateVenuesWithSongFragment layout structure
- ❌ TODO: Identify the redundant title display element
- ❌ TODO: Remove the second/duplicate title bar while preserving the top navigation title
- ❌ TODO: Ensure consistent layout spacing after title removal
- ❌ TODO: Test layout on different screen sizes to ensure proper appearance
- ❌ TODO: Verify navigation title remains functional and accessible
- ❌ TODO: Check similar association screens for consistent behavior

#### Technical Implementation Areas
**Layout Investigation:**
- Review fragment_associate_venues_with_song.xml layout file
- Identify redundant TextView or title elements
- Determine which title element to remove (likely the fragment-level one)
- Check if title is hardcoded or using string resources

**UI Consistency:**
- Ensure removal doesn't break layout constraints
- Maintain proper spacing and visual hierarchy
- Verify back navigation and toolbar functionality remains intact
- Test with different song names (short/long) to ensure layout stability

#### User Experience Improvement
**Cleaner Interface:**
- Eliminates redundant visual noise from duplicate titles
- Creates more space for the venue list content
- Maintains clear navigation context through top toolbar
- Consistent with other association and detail screens

#### Expected Changes
**Layout Modifications:**
- Remove redundant title TextView from fragment layout
- Adjust layout constraints and margins as needed
- Preserve existing functionality and navigation behavior
- Maintain accessibility and proper focus handling

#### Next Steps
[Implementation pending user authorization]

### Phase 10 - Remove Analyze Data Button from Purge Data Screen
**Status:** ❌ TODO  
**Priority:** Low  
**Description:** Remove the non-functional "Analyze Data" button from the Purge Data screen since it currently only refreshes data without providing actual analysis

#### Phase Progress
**Phase 10 Analyze Data Button Removal Implementation:**
- ❌ TODO: Remove "Analyze Data" button from fragment_purge_data.xml layout
- ❌ TODO: Remove btnAnalyzeData click listener setup in PurgeDataFragment
- ❌ TODO: Remove analyzeDataForPurging() method from PurgeDataViewModel
- ❌ TODO: Clean up btnAnalyzeData enabled/disabled state handling in updateLoadingState()
- ❌ TODO: Test Purge Data screen layout and functionality after button removal
- ❌ TODO: Verify proper spacing and layout flow after button removal
- ❌ TODO: Check if any string resources need cleanup

#### Technical Implementation Areas
**Layout Modifications:**
- Remove btnAnalyzeData MaterialButton from fragment_purge_data.xml
- Adjust layout constraints and spacing if needed
- Ensure remaining buttons (Purge, Recommended Purge) maintain proper alignment

**Code Cleanup:**
- Remove setupButtons() click listener for btnAnalyzeData
- Remove analyzeDataForPurging() method from PurgeDataViewModel
- Update updateLoadingState() to remove btnAnalyzeData.isEnabled references
- Remove any unused imports or references

**Functionality Verification:**
- Ensure data overview still refreshes properly when screen loads
- Verify purge functionality remains intact
- Confirm no broken references or missing dependencies

#### User Experience Improvement
**Cleaner Interface:**
- Eliminates confusing non-functional button that doesn't match its name
- Reduces UI clutter in the Purge Data screen
- Focuses user attention on actual purge functionality
- Prevents user confusion about what "Analyze Data" should do

**Streamlined Workflow:**
- Data overview automatically loads when screen opens
- Clear focus on purge actions (default purge, recommended purge, custom purge)
- Removes misleading UI element that implies analysis capabilities

#### Expected Changes
**File Modifications:**
- `fragment_purge_data.xml`: Remove btnAnalyzeData button element
- `PurgeDataFragment.kt`: Remove button setup and click listener
- `PurgeDataViewModel.kt`: Remove analyzeDataForPurging() method
- Layout constraints may need minor adjustments for proper spacing

#### Background Context
**Current Button Behavior:**
- The "Analyze Data" button currently only calls loadDataOverview()
- This functionality already happens automatically when the screen loads
- The button creates false expectations about analysis capabilities
- It serves no unique purpose beyond data refresh

**Rationale for Removal:**
- Button name implies functionality that doesn't exist
- Redundant with automatic data loading
- Simplifies user interface and reduces confusion
- Can be re-added later if actual analysis features are implemented

#### Next Steps
[Implementation pending user authorization]

### Phase 11 - Fix Bottom Navigation Highlighting for All Subpages
**Status:** ❌ TODO  
**Priority:** Medium  
**Description:** Fix navigation bar highlighting issue where subpages of main navigation sections don't properly highlight their parent main page icon (Songs, Venues, Visits, Settings)

#### Phase Progress
**Phase 11 Bottom Navigation Highlighting Fix Implementation:**
- ❌ TODO: Investigate navigation graph structure for all subpages across all main sections
- ❌ TODO: Examine MainActivity navigation setup and bottom navigation item mapping
- ❌ TODO: Identify all subpages that should inherit parent navigation highlighting
- ❌ TODO: Verify navigation component's automatic highlighting behavior for nested destinations
- ❌ TODO: Map subpages to their correct parent navigation sections (Songs/Venues/Visits/Settings)
- ❌ TODO: Fix bottom navigation item selection state management for all subpage hierarchies
- ❌ TODO: Test navigation flows for all main sections and their subpages
- ❌ TODO: Ensure consistent highlighting behavior across entire navigation hierarchy

#### Technical Investigation Areas
**Navigation Graph Analysis:**
- Review nav_graph.xml structure for all main navigation sections and their subpages
- Identify subpages for each main section:
  - **Songs**: Add Song, Edit Song, Song Details, Song-Venue Associations
  - **Venues**: Add Venue, Edit Venue, Venue Details, Venue Songs
  - **Visits**: Start Visit, Visit Details, Performance Edit, Add Performance
  - **Settings**: Import/Export, Purge Data, Configuration
- Verify navigation action definitions and destination relationships
- Examine fragment-to-bottom-navigation-item mapping for all destinations

**Bottom Navigation Setup:**
- Investigate MainActivity's bottom navigation configuration
- Check if NavigationUI.setupWithNavController is properly configured
- Verify bottom navigation menu XML matches navigation graph destinations
- Examine any custom navigation handling that might override automatic behavior

**Fragment Lifecycle Integration:**
- Check if StartVisitFragment properly reports its navigation context
- Verify if fragment lifecycle methods interfere with navigation highlighting
- Examine any manual navigation state management in fragments
- Test if issue occurs with other nested destinations

#### Root Cause Analysis
**Potential Issues:**
1. **Navigation Graph Structure**: Start Visit may not be properly nested under Visit destination
2. **Bottom Navigation Mapping**: Menu items may not correctly map to navigation destinations  
3. **Navigation Component Configuration**: Automatic highlighting may be misconfigured
4. **Fragment Association**: StartVisitFragment may not properly associate with Visit tab
5. **State Management**: Manual navigation state changes may override automatic behavior

**User Workflows Affected:**
- **Visits**: Visit tab → Start Visit → Other tab → Return to Visit → Wrong highlighting
- **Songs**: Songs tab → Add Song → Other tab → Return to Songs → Wrong highlighting  
- **Venues**: Venues tab → Edit Venue → Other tab → Return to Venues → Wrong highlighting
- **Settings**: Settings tab → Configuration → Other tab → Return to Settings → Wrong highlighting
- Creates confusing UX where displayed screen doesn't match highlighted tab across all sections

#### Expected Behavior After Fix
**Correct Navigation Highlighting:**
- **Songs subpages**: Add Song, Edit Song, etc. should highlight Songs tab
- **Venues subpages**: Add Venue, Edit Venue, Venue Details, etc. should highlight Venues tab
- **Visits subpages**: Start Visit, Visit Details, Performance Edit, etc. should highlight Visits tab
- **Settings subpages**: Import/Export, Purge Data, Configuration should highlight Settings tab
- Consistent behavior across all navigation paths and subpage hierarchies

**User Experience Improvement:**
- Clear visual indication of current navigation context
- Consistent bottom navigation behavior throughout the app
- Reduced user confusion about current location in navigation hierarchy
- Proper association between screen content and navigation highlighting

#### Technical Implementation Approach
**Navigation Graph Review:**
```xml
<!-- Ensure proper destination hierarchy -->
<fragment
    android:id="@+id/navigation_visits"
    android:name="com.pseddev.singventory.ui.visits.VisitsFragment"
    tools:layout="@layout/fragment_visits">
    <action
        android:id="@+id/action_visits_to_startVisit"
        app:destination="@id/startVisitFragment" />
</fragment>

<fragment
    android:id="@+id/startVisitFragment"
    android:name="com.pseddev.singventory.ui.visits.StartVisitFragment"
    tools:layout="@layout/fragment_start_visit" />
```

**Bottom Navigation Configuration:**
- Verify menu_bottom_navigation.xml item IDs match navigation graph destination IDs
- Ensure NavigationUI.setupWithNavController includes all relevant destinations
- Check if custom destination listeners interfere with automatic highlighting

#### Files Likely to Modify
**Navigation Configuration:**
- `res/navigation/nav_graph.xml`: Navigation structure and destination hierarchy
- `res/menu/menu_bottom_navigation.xml`: Bottom navigation menu items
- `MainActivity.kt`: Bottom navigation setup and configuration

**Fragment Integration:**
- `StartVisitFragment.kt`: Possible navigation context reporting
- Navigation action definitions and fragment associations

#### Testing Strategy
**Comprehensive Navigation Flow Testing:**
1. **Songs Section**: Songs → Add Song → Other tab → Return → Verify Songs highlighted
2. **Songs Section**: Songs → Edit Song → Other tab → Return → Verify Songs highlighted
3. **Venues Section**: Venues → Add Venue → Other tab → Return → Verify Venues highlighted
4. **Venues Section**: Venues → Venue Details → Other tab → Return → Verify Venues highlighted
5. **Visits Section**: Visits → Start Visit → Other tab → Return → Verify Visits highlighted
6. **Visits Section**: Visits → Visit Details → Other tab → Return → Verify Visits highlighted
7. **Settings Section**: Settings → Configuration → Other tab → Return → Verify Settings highlighted
8. **Settings Section**: Settings → Purge Data → Other tab → Return → Verify Settings highlighted
9. Test all combinations with different navigation paths and Android versions

#### Next Steps
[Implementation pending user authorization]

## Cycle Notes
- This cycle represents a shift from feature development to quality assurance
- Focus on user experience and stability rather than new functionality
- Bug discoveries will inform priorities for future development cycles
- Comprehensive testing approach ensures reliability before potential release

## Future Cycles
Based on bugs discovered in this cycle:
- DevCycle 2025-0007: Critical bug fixes and stability improvements
- DevCycle 2025-0008: UI/UX enhancements and usability improvements
- DevCycle 2025-0009: Performance optimizations and edge case handling
- DevCycle 2025-0010: Feature refinements based on testing insights

## Cycle Completion Summary
*[To be added when cycle is completed]*